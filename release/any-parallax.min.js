!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.AnyParallax=t()}(this,function(){"use strict";var u=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)};function h(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return[].concat(u(t.querySelectorAll(e)))}var A=document.documentElement.clientHeight,E=document.documentElement.clientWidth,t=0;function e(){this.els=[];for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.list=this._handelOptions(t),this._moveBinder=this._move.bind(this),this._bind()}return e.prototype._bind=function(){window.addEventListener("mousemove",this._moveBinder)},e.prototype._move=function(e){var t=e.clientX,r=e.clientY,n=t/E-.5,i=r/A-.5,s=!0,o=!1,l=void 0;try{for(var a,f=this.list.values()[Symbol.iterator]();!(s=(a=f.next()).done);s=!0){var c=a.value,u=c.distance,h=(c.spped,c.depth),p=c.el,d=c.reverse,y=!0,v=!1,m=void 0;try{for(var g,O=p.values()[Symbol.iterator]();!(y=(g=O.next()).done);y=!0){var b=g.value,_=n,x=i;d&&(_=-_,x=-x),b.style.transform="translate3d("+_*u+"px, "+x*u+"px, 0) scale("+(1-h)+", "+(1-h)+")"}}catch(e){v=!0,m=e}finally{try{!y&&O.return&&O.return()}finally{if(v)throw m}}}}catch(e){o=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(o)throw l}}},e.prototype._handelOptions=function(e){var t=[];Array.isArray(e[0])&&(e=e[0]);var r=!0,n=!1,i=void 0;try{for(var s,o=e.values()[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;l instanceof HTMLElement||"string"==typeof l?t.push.apply(t,u(this._parseOption({el:l}))):t.push.apply(t,u(this._parseOption(l)))}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return t},e.prototype._parseOption=function(e){var n=this,t=[];if(Array.isArray(e.el)){var r=Object.assign({},this._normalizeOption(e)),i=!0,s=!1,o=void 0;try{for(var l,a=e.el.values()[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var f=l.value;r.el=f,t.push(Object.assign({},r))}}catch(e){s=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}}else t.push(this._normalizeOption(e));var c=[];return t.forEach(function(t){if(t.el instanceof HTMLElement&&!n.els.includes(t.el))return n.els.push(t.el),t.el.style.transition="transform "+t.speed/1e3+"s cubic-bezier(0.960, 1.005, 0.885, 1.035)"+(t.el.style.transition?t.el.style.transition:""),t.el.style.transform="scale("+(1-t.depth)+", "+(1-t.depth)+")",void c.push(Object.assign(t,{el:[t.el]}));var e,r=h(t.el);r.length&&(r=r.filter(function(e){return!n.els.includes(e)}),(e=n.els).push.apply(e,u(r)),r.length&&(r.forEach(function(e){e.style.transition="transform "+t.speed/1e3+"s cubic-bezier(0.960, 1.005, 0.885, 1.035)"+(e.style.transition?e.style.transition:""),e.style.transform="scale("+(1-t.depth)+", "+(1-t.depth)+")"}),c.push(Object.assign(t,{el:r}))))}),c},e.prototype._normalizeOption=function(e){return"depth"in e||(e.depth=0),"speed"in e||(e.speed=100),"distance"in e||(e.distance=100),"reverse"in e||(e.reverse=!0),e.id=t++,e.remove=this._remove.bind(this,e.id),e},e.prototype._remove=function(t){var r=this;if(this.list.length){var e=this.list.findIndex(function(e){return e.id===t});this.list[e].el.forEach(function(e){e.style.transform="",r.els.splice(r.els.indexOf(e),1)}),this.list.splice(e,1)}},e.prototype.add=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.list=this._handelOptions(t).concat(this.list)},e.prototype.remove=function(){for(var n=this,e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];Array.isArray(t[0])&&(t=[t[0]]);var i=[];t.forEach(function(e){var t;"string"==typeof e?(t=i).push.apply(t,u(h(e))):i.push(e)}),(i=function(e){for(var t=[],r=0;r<e.length;-1===t.indexOf(e[r++])&&t.push(e[r-1]));return t}(i)).forEach(function(r){n.list.forEach(function(t){t.el.forEach(function(e){e===r&&(r.style.transform="",t.el.splice(t.el.indexOf(e),1),n.els.splice(n.els.indexOf(e),1))}),t.el.length||n.list.splice(n.list.indexOf(t),1)})})},e});
