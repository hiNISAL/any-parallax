!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.AnyParallax=t()}(this,function(){"use strict";var u=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function h(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return[].concat(u(t.querySelectorAll(e)))}var A=document.documentElement.clientHeight,E=document.documentElement.clientWidth;window.addEventListener("resize",function(){A=document.documentElement.clientHeight,E=document.documentElement.clientWidth});var t=0;function e(){this.els=[];for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.list=this._handelOptions(t),this._moveBinder=this._move.bind(this),this._bind()}return e.prototype._bind=function(){window.addEventListener("mousemove",this._moveBinder)},e.prototype._move=function(e){var t=e.clientX,n=e.clientY,r=t/E-.5,i=n/A-.5,o=!0,s=!1,l=void 0;try{for(var a,c=this.list.values()[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,u=f.distance,h=(f.spped,f.depth),d=f.el,p=f.reverse,y=!0,v=!1,m=void 0;try{for(var g,O=d.values()[Symbol.iterator]();!(y=(g=O.next()).done);y=!0){var b=g.value,_=r,x=i;p&&(_=-_,x=-x),b.style.transform="translate3d("+_*u+"px, "+x*u+"px, 0) scale("+(1-h)+", "+(1-h)+")"}}catch(e){v=!0,m=e}finally{try{!y&&O.return&&O.return()}finally{if(v)throw m}}}}catch(e){s=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}},e.prototype._handelOptions=function(e){var t=[];Array.isArray(e[0])&&(e=e[0]);var n=!0,r=!1,i=void 0;try{for(var o,s=e.values()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;l instanceof HTMLElement||"string"==typeof l?t.push.apply(t,u(this._parseOption({el:l}))):t.push.apply(t,u(this._parseOption(l)))}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return t},e.prototype._parseOption=function(e){var r=this,t=[];if(Array.isArray(e.el)){var n=Object.assign({},this._normalizeOption(e)),i=!0,o=!1,s=void 0;try{for(var l,a=e.el.values()[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var c=l.value;n.el=c,t.push(Object.assign({},n))}}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}}else t.push(this._normalizeOption(e));var f=[];return t.forEach(function(t){if(t.el instanceof HTMLElement&&!r.els.includes(t.el))return r.els.push(t.el),t.el.style.transition="transform "+t.speed/1e3+"s cubic-bezier(0.960, 1.005, 0.885, 1.035)"+(t.el.style.transition?t.el.style.transition:""),t.el.style.transform="scale("+(1-t.depth)+", "+(1-t.depth)+")",void f.push(Object.assign(t,{el:[t.el]}));var e,n=h(t.el);n.length&&(n=n.filter(function(e){return!r.els.includes(e)}),(e=r.els).push.apply(e,u(n)),n.length&&(n.forEach(function(e){e.style.transition="transform "+t.speed/1e3+"s cubic-bezier(0.960, 1.005, 0.885, 1.035)"+(e.style.transition?e.style.transition:""),e.style.transform="scale("+(1-t.depth)+", "+(1-t.depth)+")"}),f.push(Object.assign(t,{el:n}))))}),f},e.prototype._normalizeOption=function(e){return"depth"in e||(e.depth=0),"speed"in e||(e.speed=100),"distance"in e||(e.distance=100),"reverse"in e||(e.reverse=!0),e.id=t++,e.remove=this._remove.bind(this,e.id),e},e.prototype._remove=function(t){var n=this;if(this.list.length){var e=this.list.findIndex(function(e){return e.id===t});this.list[e].el.forEach(function(e){e.style.transform="",n.els.splice(n.els.indexOf(e),1)}),this.list.splice(e,1)}},e.prototype.add=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.list=this._handelOptions(t).concat(this.list)},e.prototype.remove=function(){for(var r=this,e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];Array.isArray(t[0])&&(t=[t[0]]);var i=[];t.forEach(function(e){var t;"string"==typeof e?(t=i).push.apply(t,u(h(e))):i.push(e)}),(i=function(e){for(var t=[],n=0;n<e.length;-1===t.indexOf(e[n++])&&t.push(e[n-1]));return t}(i)).forEach(function(n){r.list.forEach(function(t){t.el.forEach(function(e){e===n&&(n.style.transform="",t.el.splice(t.el.indexOf(e),1),r.els.splice(r.els.indexOf(e),1))}),t.el.length||r.list.splice(r.list.indexOf(t),1)})})},e});
